<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <!-- =========================
             SEARCH VIEW - DASHBOARD
        ========================== -->
        <record id="view_dat_phong_dashboard_search" model="ir.ui.view">
            <field name="name">dat.phong.dashboard.search</field>
            <field name="model">dat_phong</field>
            <field name="arch" type="xml">
                <search string="Dashboard - MÆ°á»£n phÃ²ng">
                    <field name="phong_id"/>
                    <field name="nguoi_muon_id"/>
                    <field name="trang_thai"/>
                    <field name="thoi_gian_muon_du_kien"/>
                    <field name="thoi_gian_tra_du_kien"/>

                    <separator/>

                    <!-- Tráº¡ng thÃ¡i -->
                    <filter string="Chá» duyá»‡t" name="f_cho_duyet" domain="[('trang_thai','=','chá»_duyá»‡t')]"/>
                    <filter string="ÄÃ£ duyá»‡t" name="f_da_duyet" domain="[('trang_thai','=','Ä‘Ã£_duyá»‡t')]"/>
                    <filter string="Äang sá»­ dá»¥ng" name="f_dang_sd" domain="[('trang_thai','=','Ä‘ang_sá»­_dá»¥ng')]"/>
                    <filter string="ÄÃ£ tráº£" name="f_da_tra" domain="[('trang_thai','=','Ä‘Ã£_tráº£')]"/>
                    <filter string="ÄÃ£ há»§y" name="f_da_huy" domain="[('trang_thai','=','Ä‘Ã£_há»§y')]"/>

                    <separator/>

                    <!-- Thá»i gian (lá»c theo MÆ¯á»¢N Dá»° KIáº¾N)
                         LÆ¯U Ã: trong XML attribute pháº£i escape '<' thÃ nh '&lt;'
                    -->
                    <!-- HÃ´m nay -->
                    <filter string="HÃ´m nay" name="f_today"
                            domain="[('thoi_gian_muon_du_kien','&gt;=', context_today()),
                                    ('thoi_gian_muon_du_kien','&lt;',  context_today().strftime('%%Y-%%m-%%d 23:59:59'))]"/>

                    <!-- ThÃ¡ng nÃ y (lá»c theo YYYY-MM) -->
                    <filter string="ThÃ¡ng nÃ y" name="f_month"
                            domain="[('thoi_gian_muon_du_kien','ilike', context_today().strftime('%%Y-%%m-'))]"/>

                    <!-- NÄƒm nay (lá»c theo YYYY-) -->
                    <filter string="NÄƒm nay" name="f_year"
                            domain="[('thoi_gian_muon_du_kien','ilike', context_today().strftime('%%Y-'))]"/>

                    <separator/>

                    <group expand="0" string="NhÃ³m theo">
                        <filter string="PhÃ²ng" name="g_phong" context="{'group_by':'phong_id'}"/>
                        <filter string="NgÆ°á»i mÆ°á»£n" name="g_nguoi_muon" context="{'group_by':'nguoi_muon_id'}"/>
                        <filter string="Tráº¡ng thÃ¡i" name="g_trang_thai" context="{'group_by':'trang_thai'}"/>
                        <filter string="NgÃ y mÆ°á»£n (dá»± kiáº¿n)" name="g_ngay"
                                context="{'group_by':'thoi_gian_muon_du_kien:day'}"/>
                        <filter string="ThÃ¡ng mÆ°á»£n (dá»± kiáº¿n)" name="g_thang"
                                context="{'group_by':'thoi_gian_muon_du_kien:month'}"/>
                    </group>
                </search>
            </field>
        </record>

        <!-- =========================
             GRAPH VIEW (stacked bar)
        ========================== -->
        <record id="view_dat_phong_graph_dashboard" model="ir.ui.view">
            <field name="name">dat.phong.graph.dashboard</field>
            <field name="model">dat_phong</field>
            <field name="arch" type="xml">
                <graph string="ðŸ“Š Thá»‘ng kÃª theo phÃ²ng vÃ  tráº¡ng thÃ¡i" type="bar" stacked="True">
                    <field name="phong_id" type="row"/>
                    <field name="trang_thai" type="col"/>
                    <field name="id" type="measure"/>
                </graph>
            </field>
        </record>

        <!-- =========================
             PIVOT VIEW
        ========================== -->
        <record id="view_dat_phong_pivot_dashboard" model="ir.ui.view">
            <field name="name">dat.phong.pivot.dashboard</field>
            <field name="model">dat_phong</field>
            <field name="arch" type="xml">
                <pivot string="ðŸ“Œ Pivot - PhÃ¢n tÃ­ch mÆ°á»£n phÃ²ng">
                    <field name="phong_id" type="row"/>
                    <field name="nguoi_muon_id" type="row"/>
                    <field name="trang_thai" type="col"/>
                    <field name="thoi_gian_muon_du_kien" interval="month" type="col"/>
                    <field name="id" type="measure"/>
                </pivot>
            </field>
        </record>

        <!-- =========================
             TREE VIEW (drill-down)
        ========================== -->
        <record id="view_dat_phong_tree_dashboard" model="ir.ui.view">
            <field name="name">dat.phong.tree.dashboard</field>
            <field name="model">dat_phong</field>
            <field name="arch" type="xml">
                <tree string="Danh sÃ¡ch (drill-down)" create="false">
                    <field name="phong_id"/>
                    <field name="nguoi_muon_id"/>
                    <field name="thoi_gian_muon_du_kien"/>
                    <field name="thoi_gian_tra_du_kien"/>
                    <field name="trang_thai"
                           decoration-success="trang_thai=='Ä‘Ã£_duyá»‡t'"
                           decoration-danger="trang_thai=='Ä‘ang_sá»­_dá»¥ng'"
                           decoration-muted="trang_thai=='Ä‘Ã£_há»§y'"
                           decoration-info="trang_thai=='chá»_duyá»‡t'"/>
                </tree>
            </field>
        </record>

        <!-- =========================
             ACTION - DASHBOARD
        ========================== -->
        <record id="action_dat_phong_dashboard" model="ir.actions.act_window">
            <field name="name">ðŸ“Š Dashboard Tráº¡ng thÃ¡i mÆ°á»£n phÃ²ng</field>
            <field name="res_model">dat_phong</field>
            <field name="view_mode">graph,pivot,tree</field>
            <field name="search_view_id" ref="view_dat_phong_dashboard_search"/>
            <field name="context">{'search_default_f_month': 1}</field>
        </record>

    </data>
</odoo>
